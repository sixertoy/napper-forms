"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var PropTypes=_interopDefault(require("prop-types"));var React=_interopDefault(require("react"));var reactFinalForm=require("react-final-form");var reactJss=require("react-jss");var napperCore=require("@iziges/napper-core");var draftJs=require("draft-js");var draftJsExportMarkdown=require("draft-js-export-markdown");var draftJsImportMarkdown=require("draft-js-import-markdown");var reactDraftWysiwyg=require("react-draft-wysiwyg");var onErrorFocusDecorator=_interopDefault(require("final-form-focus"));function parseErrors(err){if(Array.isArray(err))return err;if(typeof err==="string")return[err];return err}var FieldError=function FieldError(_ref){var error=_ref.error,initial=_ref.initial,pristine=_ref.pristine,submitError=_ref.submitError,touched=_ref.touched;var canShowError=touched||initial&&pristine;var shouldShowError=canShowError&&(error||submitError);var errors=parseErrors(error||submitError);return React.createElement("span",{className:"smarter-form-error"},shouldShowError&&errors.map((function(msg,index){return React.createElement("span",{className:"is-block",key:"error::".concat(index)},msg)})))};FieldError.defaultProps={error:null,initial:undefined,pristine:false,submitError:null,touched:false};FieldError.propTypes={error:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),initial:PropTypes.any,pristine:PropTypes.bool,submitError:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),touched:PropTypes.bool};var FieldLabel=function FieldLabel(_ref){var disabled=_ref.disabled,label=_ref.label,required=_ref.required;var cssclass="smarter-form-label";var isrequired=Boolean(required);if(disabled)cssclass="".concat(cssclass," disabled");return React.createElement("span",{className:cssclass},React.createElement("span",null,label),isrequired&&React.createElement("span",{className:"smarter-form-required-icon"},"*"))};FieldLabel.defaultProps={disabled:false};FieldLabel.propTypes={disabled:PropTypes.bool,label:PropTypes.string.isRequired,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)]).isRequired};function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var FormControls=function(_React$PureComponent){_inherits(FormControls,_React$PureComponent);function FormControls(){_classCallCheck(this,FormControls);return _possibleConstructorReturn(this,_getPrototypeOf(FormControls).apply(this,arguments))}_createClass(FormControls,[{key:"render",value:function render(){var _this$props=this.props,buttons=_this$props.buttons,canReset=_this$props.canReset,canSubmit=_this$props.canSubmit,disabled=_this$props.disabled,onReset=_this$props.onReset;var useSubmitButton=buttons.submit;var useResetButton=buttons.cancel&&onReset;return React.createElement("div",null,useResetButton&&React.createElement("button",{disabled:disabled||!canReset,type:"button",onClick:onReset},buttons.cancel),useSubmitButton&&React.createElement("button",{disabled:disabled||!canSubmit,type:"submit"},buttons.submit))}}]);return FormControls}(React.PureComponent);FormControls.defaultProps={buttons:{cancel:"Annuler",submit:"Envoyer"},canReset:false,canSubmit:false,disabled:false,onReset:function onReset(){}};FormControls.propTypes={buttons:PropTypes.shape({cancel:PropTypes.string,submit:PropTypes.string}),canReset:PropTypes.bool,canSubmit:PropTypes.bool,disabled:PropTypes.bool,onReset:PropTypes.func};var BooleanInput=function(_React$PureComponent){_inherits(BooleanInput,_React$PureComponent);function BooleanInput(){_classCallCheck(this,BooleanInput);return _possibleConstructorReturn(this,_getPrototypeOf(BooleanInput).apply(this,arguments))}_createClass(BooleanInput,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,disabled=_this$props.disabled,label=_this$props.label,labels=_this$props.labels,name=_this$props.name,required=_this$props.required;return React.createElement(reactFinalForm.Field,{name:name,type:"hidden",parse:function parse(v){return v==="yes"},format:function format(v){return v===true&&"yes"||null}},(function(_ref){var input=_ref.input;return React.createElement("div",{className:className},React.createElement(FieldLabel,{disabled:disabled,label:label,required:required}),React.createElement("div",null,React.createElement("input",_extends({},input,{type:"hidden"})),React.createElement("label",{htmlFor:"".concat(name,"::radio::yes")},React.createElement("input",{value:"yes",type:"radio",checked:input.value,name:"".concat(name,"::radio"),onChange:input.onChange,id:"".concat(name,"::radio::yes")}),React.createElement("span",null,labels[0])),React.createElement("label",{htmlFor:"".concat(name,"::radio::no")},React.createElement("input",{value:"no",type:"radio",checked:!input.value,name:"".concat(name,"::radio"),onChange:input.onChange,id:"".concat(name,"::radio::no")}),React.createElement("span",null,labels[1]))))}))}}]);return BooleanInput}(React.PureComponent);BooleanInput.defaultProps={className:"m12",disabled:false,labels:["Oui","Non"],required:false};BooleanInput.propTypes={className:PropTypes.string,disabled:PropTypes.bool,label:PropTypes.string.isRequired,labels:PropTypes.arrayOf(PropTypes.string),name:PropTypes.string.isRequired,required:PropTypes.bool};var noop=function noop(){return{}};var composedValidate=function composedValidate(fns){return function(values){var errors=fns.reduce((function(acc,fn){var error=fn(values);return _objectSpread2({},acc,{},error)}),{});return errors}};var composeFormValidator=function composeFormValidator(fns){if(!fns||!Array.isArray(fns))return noop;var validators=fns.map((function(fn){var isfunction=typeof fn==="function";if(!isfunction)console.warn("Validator is not a function: ",_typeof(fn));return isfunction?fn:noop}));return composedValidate(validators)};var noopnoop=function noopnoop(){return undefined};var compose=function compose(){for(var _len=arguments.length,validators=new Array(_len),_key=0;_key<_len;_key++){validators[_key]=arguments[_key]}return function(value){return validators.reduce((function(acc,validator){var errorMsg=validator(value);return[].concat(_toConsumableArray(acc),[errorMsg])}),[])}};var isBoolean=function isBoolean(val){return typeof val==="boolean"};var isFunction=function isFunction(val){return typeof val==="function"};var isTrue=function isTrue(val){return isBoolean(val)&&val===true};var isFalse=function isFalse(val){return isBoolean(val)&&val===false};var isValidArray=function isValidArray(val){if(!Array.isArray(val))return false;var filtered=val.filter(isFunction);return filtered.length>0};var isValid=function isValid(val){return isBoolean(val)||isFunction(val)||isValidArray(val)};var parseValidatorsArguments=function parseValidatorsArguments(args){return args.reduce((function(acc,val){if(!acc.length&&isValid(val))return[val];return isValid(val)&&!isBoolean(val)?[].concat(_toConsumableArray(acc),[val]):acc}),[])};var toArray=function toArray(val){if(isFunction(val))return[val];var filtered=val.filter(isFunction);if(filtered.length)return filtered;return[noopnoop]};var parseValidators=function parseValidators(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var parsed=parseValidatorsArguments(args);if(!parsed.length)return toArray(noopnoop);var _parsed=_slicedToArray(parsed,2),first=_parsed[0],second=_parsed[1];var shouldReturnNoop=!isValid(first)||isFalse(first)||isBoolean(first)&&!isValid(second)||isBoolean(first)&&isBoolean(second);if(shouldReturnNoop)return toArray(noopnoop);var isSecondValid=isTrue(first)&&isValid(second);if(isSecondValid)return toArray(second);var isFirstValid=isFunction(first)||isValidArray(first);if(!isFirstValid)return toArray(noopnoop);return toArray(first)};var composeValidators=function composeValidators(required,defaults){var parsed=parseValidators(required,defaults);return compose.apply(void 0,_toConsumableArray(parsed))};var ERROR_MSG="Field is out of range";var includesRange=function includesRange(min,max){return function(value){if(value<min||value>max)return ERROR_MSG;return undefined}};var ERROR_MSG$1="Field must be filled";var isNotEmptyString=function isNotEmptyString(v){var value=v&&typeof v==="string"&&v.trim()||"";value=value.replace(/&nbsp;/g," ");value=value.replace(/\s+/g,"");var isvalid=value&&value.length&&value!=="";if(isvalid)return undefined;return ERROR_MSG$1};var ERROR_MSG$2="Value is not a number";var isNumber=function isNumber(val){var exp=/^((-{0,1})([0-9]*)(\.{0,1}|,{0,1})([0-9]+)|(-{0,1}Infinity))$/gm;var isvalidnumber=typeof val==="number"&&!Number.isNaN(val);var isvalidstring=typeof val==="string"&&RegExp(exp).test(val);var isvalid=isvalidnumber||isvalidstring;if(!isvalid)return ERROR_MSG$2;return undefined};var isRequired=function isRequired(val){return val!==null&&val!=="null"&&val!=="undefined"&&typeof val!=="undefined"};var DEFAULT_VALIDATORS=[isNumber];var styles={};var NumberInput=function(_React$PureComponent){_inherits(NumberInput,_React$PureComponent);function NumberInput(){_classCallCheck(this,NumberInput);return _possibleConstructorReturn(this,_getPrototypeOf(NumberInput).apply(this,arguments))}_createClass(NumberInput,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,disabled=_this$props.disabled,label=_this$props.label,max=_this$props.max,min=_this$props.min,name=_this$props.name,placeholder=_this$props.placeholder,required=_this$props.required,step=_this$props.step;var defaultsValidators=[].concat(DEFAULT_VALIDATORS,[includesRange(min,max)]);var validators=composeValidators(required,defaultsValidators);return React.createElement(reactFinalForm.Field,{name:name,validate:validators},(function(_ref){var input=_ref.input,meta=_ref.meta;return React.createElement("div",{className:className},React.createElement("label",{htmlFor:name},React.createElement(FieldLabel,{disabled:disabled,label:label,required:required}),React.createElement("input",_extends({},input,{disabled:disabled,max:max,min:min,placeholder:placeholder,step:step,type:"number"})),React.createElement(FieldError,meta)))}))}}]);return NumberInput}(React.PureComponent);NumberInput.defaultProps={className:"m12",disabled:false,max:Infinity,min:-Infinity,placeholder:"Enter a value",required:false,step:1,toot:true};NumberInput.propTypes={className:PropTypes.string,disabled:PropTypes.bool,label:PropTypes.string.isRequired,max:PropTypes.number,min:PropTypes.number,name:PropTypes.string.isRequired,placeholder:PropTypes.string,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)]),step:PropTypes.number,toot:PropTypes.bool};var NumberInput$1=reactJss.createUseStyles(styles)(NumberInput);var MARKDOWN_DEBOUNCE_MS=500;var MARKDOWN_VIEWS=["markdown","raw"];var MARKDOWN_EDITOR_VIEWS=napperCore.mirrorKeys(MARKDOWN_VIEWS,[napperCore.ucfirst]);var MARKDOWN_EDITOR_TOOLBAR={blockType:{options:["Normal","H1","H2","H3","H4","H5","H6"]},inline:{options:["bold","italic","underline","strikethrough"]},options:["inline","blockType"]};var parseMarkdown=function parseMarkdown(rawContent){var markdownContent=draftJsImportMarkdown.stateFromMarkdown(rawContent);var editorState=draftJs.EditorState.createWithContent(markdownContent);return editorState};var stringifyMarkdown=function stringifyMarkdown(editorState){var markdownContent=editorState.getCurrentContent();var rawContent=draftJsExportMarkdown.stateToMarkdown(markdownContent);return rawContent};var RichTextEditorHeader=function(_React$PureComponent){_inherits(RichTextEditorHeader,_React$PureComponent);function RichTextEditorHeader(){_classCallCheck(this,RichTextEditorHeader);return _possibleConstructorReturn(this,_getPrototypeOf(RichTextEditorHeader).apply(this,arguments))}_createClass(RichTextEditorHeader,[{key:"render",value:function render(){var _this$props=this.props,activeView=_this$props.activeView,clickHandler=_this$props.clickHandler,labels=_this$props.labels;var baseUniqKeyId=["markdown","editor","controls"];return React.createElement("div",{className:""},Object.keys(MARKDOWN_EDITOR_VIEWS).map((function(key,index){var keyvalue=key;var isdisabled=activeView===keyvalue;var uniqKey=napperCore.uniqKeyId(baseUniqKeyId,keyvalue);var label=labels&&labels[index]||MARKDOWN_EDITOR_VIEWS[key];return React.createElement("button",{key:uniqKey,type:"button",onClick:function onClick(){return clickHandler(keyvalue)},disabled:isdisabled},React.createElement("span",null,label))})))}}]);return RichTextEditorHeader}(React.PureComponent);RichTextEditorHeader.defaultProps={labels:null};RichTextEditorHeader.propTypes={activeView:PropTypes.string.isRequired,clickHandler:PropTypes.func.isRequired,labels:PropTypes.arrayOf(PropTypes.string)};var RichTextEditorMarkdown=function(_React$PureComponent){_inherits(RichTextEditorMarkdown,_React$PureComponent);function RichTextEditorMarkdown(props){var _this;_classCallCheck(this,RichTextEditorMarkdown);_this=_possibleConstructorReturn(this,_getPrototypeOf(RichTextEditorMarkdown).call(this,props));_defineProperty(_assertThisInitialized(_this),"updateInputAfterStateChanges",napperCore.debounce((function(){var editorState=_this.state.editorState;var onChangeHandler=_this.props.onChangeHandler;var rawvalue=stringifyMarkdown(editorState);onChangeHandler(rawvalue)}),MARKDOWN_DEBOUNCE_MS));_defineProperty(_assertThisInitialized(_this),"onEditorStateChange",(function(editorState){_this.setState({editorState:editorState},_this.updateInputAfterStateChanges)}));var content=props.content;var _editorState=parseMarkdown(content||"");_this.state={editorState:_editorState};return _this}_createClass(RichTextEditorMarkdown,[{key:"render",value:function render(){var editorState=this.state.editorState;var _this$props=this.props,readonly=_this$props.readonly,visible=_this$props.visible;var classes=visible?"is-block":"is-hidden";return React.createElement("div",{className:classes},React.createElement(reactDraftWysiwyg.Editor,{readOnly:readonly,initialEditorState:editorState,toolbar:MARKDOWN_EDITOR_TOOLBAR,editorClassName:"markdown-draft-editor",wrapperClassName:"markdown-draft-wrapper",toolbarClassName:"markdown-draft-toolbar",onEditorStateChange:this.onEditorStateChange}))}}]);return RichTextEditorMarkdown}(React.PureComponent);RichTextEditorMarkdown.defaultProps={content:"",readonly:false,visible:true};RichTextEditorMarkdown.propTypes={content:PropTypes.string,onChangeHandler:PropTypes.func.isRequired,readonly:PropTypes.bool,visible:PropTypes.bool};var MarkdownEditorRaw=function MarkdownEditorRaw(_ref){var input=_ref.input,readonly=_ref.readonly,visible=_ref.visible;var classes=visible?"is-block":"is-hidden";return React.createElement("div",{className:classes},React.createElement("textarea",_extends({},input,{readOnly:readonly,style:{height:"180px",resize:"none",width:"100%"}})))};MarkdownEditorRaw.defaultProps={readonly:true,visible:false};MarkdownEditorRaw.propTypes={input:PropTypes.shape().isRequired,readonly:PropTypes.bool,visible:PropTypes.bool};var RichTextInput=function(_React$PureComponent){_inherits(RichTextInput,_React$PureComponent);function RichTextInput(props){var _this;_classCallCheck(this,RichTextInput);_this=_possibleConstructorReturn(this,_getPrototypeOf(RichTextInput).call(this,props));_defineProperty(_assertThisInitialized(_this),"onToggleViewHandler",(function(activeView){_this.setState({activeView:activeView})}));_this.state={activeView:MARKDOWN_VIEWS[0]};return _this}_createClass(RichTextInput,[{key:"render",value:function render(){var _this2=this;var activeView=this.state.activeView;var _this$props=this.props,className=_this$props.className,label=_this$props.label,name=_this$props.name,required=_this$props.required;return React.createElement(reactFinalForm.Field,{name:name,label:label},(function(_ref){var input=_ref.input;return React.createElement("div",{className:className},React.createElement("label",{htmlFor:name},React.createElement(FieldLabel,{label:label,required:required}),React.createElement("div",{className:"markdown-editor-container"},React.createElement(RichTextEditorHeader,{activeView:activeView,clickHandler:_this2.onToggleViewHandler}),React.createElement(RichTextEditorMarkdown,{content:input.value,onChangeHandler:input.onChange}),React.createElement("div",{className:"is-block"},React.createElement("textarea",_extends({},input,{className:"markdown-editor-input"}))))))}))}}]);return RichTextInput}(React.PureComponent);RichTextInput.defaultProps={className:"richtext-input",required:false};RichTextInput.propTypes={className:PropTypes.string,label:PropTypes.string.isRequired,name:PropTypes.string.isRequired,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)])};var SelectInput=function(_React$PureComponent){_inherits(SelectInput,_React$PureComponent);function SelectInput(){var _getPrototypeOf2;var _this;_classCallCheck(this,SelectInput);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SelectInput)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"formatSelectedValue",(function(obj){if(!obj)return null;var format=_this.props.format;return obj[format.id]}));_defineProperty(_assertThisInitialized(_this),"parseSelectedValue",(function(val){if(typeof val!=="string")return null;var _this$props=_this.props,format=_this$props.format,options=_this$props.options;var selected=options.find((function(obj){return obj[format.id]===val}));return selected}));_defineProperty(_assertThisInitialized(_this),"renderOption",(function(format,name){return function(opt,index){var uniqkey=napperCore.uniqKeyId(name,"select",index);return React.createElement("option",{key:uniqkey,value:opt[format.id]},opt[format.label])}}));_defineProperty(_assertThisInitialized(_this),"renderDefaultOption",(function(){var _this$props2=_this.props,name=_this$props2.name,placeholder=_this$props2.placeholder;var uniqkey=napperCore.uniqKeyId(name,"select","__default__");return React.createElement("option",{key:uniqkey},placeholder)}));return _this}_createClass(SelectInput,[{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,className=_this$props3.className,disabled=_this$props3.disabled,format=_this$props3.format,label=_this$props3.label,name=_this$props3.name,options=_this$props3.options,required=_this$props3.required,size=_this$props3.size;var validators=composeValidators(required,[isRequired]);return React.createElement(reactFinalForm.Field,{name:name,validate:validators,parse:this.parseSelectedValue,format:this.formatSelectedValue},(function(_ref){var input=_ref.input,meta=_ref.meta;return React.createElement("div",{className:"".concat(className)},React.createElement("label",{htmlFor:name},React.createElement(FieldLabel,{label:label,disabled:disabled,required:required}),React.createElement("select",_extends({},input,{size:size,multiple:false,disabled:disabled}),_this2.renderDefaultOption(),options&&options.map(_this2.renderOption(format,name))),React.createElement(FieldError,meta)))}))}}]);return SelectInput}(React.PureComponent);SelectInput.defaultProps={className:"m12",disabled:false,format:{id:"id",label:"label"},placeholder:"Select a value",required:false,size:1};SelectInput.propTypes={className:PropTypes.string,disabled:PropTypes.bool,format:PropTypes.shape({label:PropTypes.string,value:PropTypes.string}),label:PropTypes.string.isRequired,name:PropTypes.string.isRequired,options:PropTypes.arrayOf(PropTypes.object).isRequired,placeholder:PropTypes.string,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)]),size:PropTypes.number};var DEFAULT_VALIDATORS$1=[isNotEmptyString];var TextareaInput=function(_React$PureComponent){_inherits(TextareaInput,_React$PureComponent);function TextareaInput(){_classCallCheck(this,TextareaInput);return _possibleConstructorReturn(this,_getPrototypeOf(TextareaInput).apply(this,arguments))}_createClass(TextareaInput,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,disabled=_this$props.disabled,label=_this$props.label,maxlength=_this$props.maxlength,name=_this$props.name,placeholder=_this$props.placeholder,readonly=_this$props.readonly,required=_this$props.required;var validators=composeValidators(required,DEFAULT_VALIDATORS$1);return React.createElement(reactFinalForm.Field,{name:name,validate:validators},(function(_ref){var input=_ref.input,meta=_ref.meta;return React.createElement("div",{className:className},React.createElement("label",{htmlFor:name},React.createElement(FieldLabel,{disabled:disabled,label:label,required:required}),React.createElement("textarea",_extends({},input,{wrap:"soft",disabled:disabled,readOnly:readonly,maxLength:maxlength,placeholder:placeholder})),React.createElement(FieldError,meta)))}))}}]);return TextareaInput}(React.PureComponent);TextareaInput.defaultProps={autoComplete:false,className:"m12",disabled:false,label:null,maxlength:Infinity,placeholder:"Entrer une valeur",readonly:false,required:false};TextareaInput.propTypes={autoComplete:PropTypes.bool,className:PropTypes.string,disabled:PropTypes.bool,label:PropTypes.string,maxlength:PropTypes.number,name:PropTypes.string.isRequired,placeholder:PropTypes.string,readonly:PropTypes.bool,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)])};var DEFAULT_VALIDATORS$2=[isNotEmptyString];var TextInput=function(_React$PureComponent){_inherits(TextInput,_React$PureComponent);function TextInput(){_classCallCheck(this,TextInput);return _possibleConstructorReturn(this,_getPrototypeOf(TextInput).apply(this,arguments))}_createClass(TextInput,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,disabled=_this$props.disabled,label=_this$props.label,name=_this$props.name,placeholder=_this$props.placeholder,required=_this$props.required;var validators=composeValidators(required,DEFAULT_VALIDATORS$2);return React.createElement(reactFinalForm.Field,{name:name,validate:validators},(function(_ref){var input=_ref.input,meta=_ref.meta;return React.createElement("div",{className:className},React.createElement("label",{htmlFor:name},React.createElement(FieldLabel,{disabled:disabled,label:label,required:required}),React.createElement("input",_extends({},input,{disabled:disabled,id:name,placeholder:placeholder,type:"text"})),React.createElement(FieldError,meta)))}))}}]);return TextInput}(React.PureComponent);TextInput.defaultProps={autoComplete:false,className:"m12",disabled:false,label:null,placeholder:"Entrer une valeur",required:false};TextInput.propTypes={autoComplete:PropTypes.bool,className:PropTypes.string,disabled:PropTypes.bool,label:PropTypes.string,name:PropTypes.string.isRequired,placeholder:PropTypes.string,required:PropTypes.oneOfType([PropTypes.bool,PropTypes.func,PropTypes.arrayOf(PropTypes.func)])};var SmarterForm=function(_React$PureComponent){_inherits(SmarterForm,_React$PureComponent);function SmarterForm(){_classCallCheck(this,SmarterForm);return _possibleConstructorReturn(this,_getPrototypeOf(SmarterForm).apply(this,arguments))}_createClass(SmarterForm,[{key:"render",value:function render(){var _this$props=this.props,children=_this$props.children,controls=_this$props.controls,initialValues=_this$props.initialValues,name=_this$props.name,onSubmit=_this$props.onSubmit,validators=_this$props.validators;var decorators=[onErrorFocusDecorator()];var validate=composeFormValidator(validators);return React.createElement(reactFinalForm.Form,{decorators:decorators,initialValues:initialValues,name:name,onSubmit:onSubmit,validate:validate},(function(_ref){var dirty=_ref.dirty,form=_ref.form,handleSubmit=_ref.handleSubmit,invalid=_ref.invalid,pristine=_ref.pristine,submitError=_ref.submitError,submitting=_ref.submitting;var disabled=submitting;var canSubmit=!(pristine||invalid);return React.createElement("form",{onSubmit:handleSubmit},React.createElement("div",null,children),submitError&&React.createElement("div",{className:"error"},submitError),controls&&React.createElement(FormControls,{canReset:dirty,canSubmit:canSubmit,disabled:disabled,onReset:form.reset}))}))}}]);return SmarterForm}(React.PureComponent);SmarterForm.defaultProps={controls:true,initialValues:{},validators:[function(){return undefined}]};SmarterForm.propTypes={children:PropTypes.node.isRequired,controls:PropTypes.bool,initialValues:PropTypes.shape(),name:PropTypes.string.isRequired,onSubmit:PropTypes.func.isRequired,validators:PropTypes.arrayOf(PropTypes.func)};exports.BooleanInput=BooleanInput;exports.FieldError=FieldError;exports.FieldLabel=FieldLabel;exports.FormControls=FormControls;exports.MarkdownInput=RichTextInput;exports.NumberInput=NumberInput$1;exports.SelectInput=SelectInput;exports.SmarterForm=SmarterForm;exports.TextAreaInput=TextareaInput;exports.TextInput=TextInput;exports.composeFieldValidators=composeValidators;exports.composeFormValidator=composeFormValidator;exports.includesRange=includesRange;exports.isNotEmptyString=isNotEmptyString;exports.isNumber=isNumber;exports.isRequired=isRequired;
